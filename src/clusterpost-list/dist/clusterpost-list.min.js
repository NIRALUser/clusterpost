"use strict";angular.module("jsonFormatter",["RecursionHelper"]).provider("JSONFormatterConfig",function(){var n=!1,e=100,t=5;return{get hoverPreviewEnabled(){return n},set hoverPreviewEnabled(e){n=!!e},get hoverPreviewArrayCount(){return e},set hoverPreviewArrayCount(n){e=parseInt(n,10)},get hoverPreviewFieldCount(){return t},set hoverPreviewFieldCount(n){t=parseInt(n,10)},$get:function(){return{hoverPreviewEnabled:n,hoverPreviewArrayCount:e,hoverPreviewFieldCount:t}}}}).directive("jsonFormatter",["RecursionHelper","JSONFormatterConfig",function(n,e){function t(n){return n.replace('"','"')}function r(n){if(void 0===n)return"";if(null===n)return"Object";if("object"==typeof n&&!n.constructor)return"Object";var e=/function (.{1,})\(/,t=e.exec(n.constructor.toString());return t&&t.length>1?t[1]:""}function o(n){return null===n?"null":typeof n}function s(n,e){var r=o(n);return"null"===r||"undefined"===r?r:("string"===r&&(e='"'+t(e)+'"'),"function"===r?n.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{…}":e)}function i(n){var e="";return angular.isObject(n)?(e=r(n),angular.isArray(n)&&(e+="["+n.length+"]")):e=s(n,n),e}function a(n){n.isArray=function(){return angular.isArray(n.json)},n.isObject=function(){return angular.isObject(n.json)},n.getKeys=function(){return n.isObject()?Object.keys(n.json).map(function(n){return""===n?'""':n}):void 0},n.type=o(n.json),n.hasKey="undefined"!=typeof n.key,n.getConstructorName=function(){return r(n.json)},"string"===n.type&&("Invalid Date"!==new Date(n.json).toString()&&(n.isDate=!0),0===n.json.indexOf("http")&&(n.isUrl=!0)),n.isEmptyObject=function(){return n.getKeys()&&!n.getKeys().length&&n.isOpen&&!n.isArray()},n.isOpen=!!n.open,n.toggleOpen=function(){n.isOpen=!n.isOpen},n.childrenOpen=function(){return n.open>1?n.open-1:0},n.openLink=function(e){e&&(window.location.href=n.json)},n.parseValue=function(e){return s(n.json,e)},n.showThumbnail=function(){return!!e.hoverPreviewEnabled&&n.isObject()&&!n.isOpen},n.getThumbnail=function(){if(n.isArray())return n.json.length>e.hoverPreviewArrayCount?"Array["+n.json.length+"]":"["+n.json.map(i).join(", ")+"]";var t=n.getKeys(),r=t.slice(0,e.hoverPreviewFieldCount),o=r.map(function(e){return e+":"+i(n.json[e])}),s=t.length>=5?"…":"";return"{"+o.join(", ")+s+"}"}}return{templateUrl:"json-formatter.html",restrict:"E",replace:!0,scope:{json:"=",key:"=",open:"="},compile:function(e){return n.compile(e,a)}}}]),"object"==typeof module&&(module.exports="jsonFormatter"),angular.module("RecursionHelper",[]).factory("RecursionHelper",["$compile",function(n){return{compile:function(e,t){angular.isFunction(t)&&(t={post:t});var r,o=e.contents().remove();return{pre:t&&t.pre?t.pre:null,post:function(e,s){r||(r=n(o)),r(e,function(n){s.append(n)}),t&&t.post&&t.post.apply(null,arguments)}}}}}]),angular.module("jsonFormatter").run(["$templateCache",function(n){n.put("json-formatter.html",'<div ng-init="isOpen = open && open > 0" class="json-formatter-row"><a ng-click="toggleOpen()"><span class="toggler {{isOpen ? \'open\' : \'\'}}" ng-if="isObject()"></span> <span class="key" ng-if="hasKey"><span class="key-text">{{key}}</span><span class="colon">:</span></span> <span class="value"><span ng-if="isObject()"><span class="constructor-name">{{getConstructorName(json)}}</span> <span ng-if="isArray()"><span class="bracket">[</span><span class="number">{{json.length}}</span><span class="bracket">]</span></span></span> <span ng-if="!isObject()" ng-click="openLink(isUrl)" class="{{type}}" ng-class="{date: isDate, url: isUrl}">{{parseValue(json)}}</span></span> <span ng-if="showThumbnail()" class="thumbnail-text">{{getThumbnail()}}</span></a><div class="children" ng-if="getKeys().length && isOpen"><json-formatter ng-repeat="key in getKeys() track by $index" json="json[key]" key="key" open="childrenOpen()"></json-formatter></div><div class="children empty object" ng-if="isEmptyObject()"></div><div class="children empty array" ng-if="getKeys() && !getKeys().length && isOpen && isArray()"></div></div>')}]);angular.module("clusterpost-list",["ui.bootstrap","smart-table","jsonFormatter","jwt-user-login"]);angular.module("clusterpost-list").factory("clusterpostService",["$q","$http","$location",function($q,$http,$location){return{getExecutionServers:function(){return $http({method:"GET",url:"/executionserver"})},getJobStatus:function(id){return $http({method:"GET",url:"/executionserver/"+id})},submitJob:function(id,force){return $http({method:"POST",url:"/executionserver/"+id,data:{force:force}})},killJob:function(id){return $http({method:"DELETE",url:"/executionserver/"+id})},createJob:function(job){return $http({method:"POST",url:"/dataprovider",data:job})},getAllJobs:function(executable){return $http({method:"GET",url:"/dataprovider",params:{executable:executable}})},updateJob:function(job){return $http({method:"PUT",url:"/dataprovider",data:job})},getJob:function(id){return $http({method:"GET",url:"/dataprovider/"+id})},getAttachment:function(id,filename,responseType){return $http({method:"GET",url:"/dataprovider/"+id+"/"+encodeURIComponent(filename),responseType:responseType})},getAttachmentDowloadToken:function(id,filename,expires){return $http({method:"GET",url:"/dataprovider/download/"+id+"/"+encodeURIComponent(filename),params:{expires:expires}})},getDownloadAttachmentURL:function(id,filename){return this.getAttachmentDowloadToken(id,filename).then(function(res){return"/dataprovider/download/"+res.data.token})},addAttachment:function(id,filename,data){return $http({method:"PUT",url:"/dataprovider/"+id+"/"+filename,data:data})},addAttachments:function(id,filenameArray,dataArray){var service=this;var addAttachmentsRec=function(id,filenameArray,dataArray,index,resArray){return service.addAttachment(id,filenameArray[index],dataArray[index]).then(function(res){resArray.push(res);index++;if(index<filenameArray.length&&index<dataArray.length){return addAttachmentsRec(id,filenameArray,dataArray,index,resArray)}return resArray})};return addAttachmentsRec(id,filenameArray,dataArray,0,[])},getJobUser:function(email,jobstatus,executable){return $http({method:"GET",url:"/dataprovider/user",params:{userEmail:email,jobstatus:jobstatus,executable:executable}})},getUserJobs:function(params){return $http({method:"GET",url:"/dataprovider/user",params:params})},deleteJob:function(id){return $http({method:"DELETE",url:"/dataprovider/"+id})},createAndSubmitJob:function(job,filenameArray,dataArray){var service=this;return service.createJob(job).then(function(res){var doc=res.data;var job_id=doc.id;return service.addAttachments(job_id,filenameArray,dataArray).then(function(res){return submitJob(job_id)})})},getExecutionServerTokens:function(){return $http({method:"GET",url:"/executionserver/tokens"})}}}]);angular.module("clusterpost-list").directive("clusterpostJobs",["$routeParams","$location","clusterpostService","$filter","$q","clusterauth",function($routeParams,$location,clusterpostService,$filter,$q,clusterauth){function link($scope,$attrs){$scope.jobs={selectedJob:{}};$scope.jobs.onFilter=function(filtered){$scope.jobs.filteredJobs=filtered};$scope.updateStatus=function(job){clusterpostService.getJobStatus(job._id).then(function(res){job.jobstatus=res.data}).catch(function(e){console.error(e);throw e})};$scope.killJob=function(job){clusterpostService.killJob(job._id).then(function(res){job.jobstatus=res.data}).catch(function(e){console.error(e);throw e})};$scope.removeRow=function(job){var index=$scope.rowCollection.indexOf(job);if(index!==-1){$scope.rowCollection.splice(index,1)}};$scope.deleteJob=function(job){clusterpostService.deleteJob(job._id).then(function(res){for(var i=0;i<$scope.jobs.data.length;i++){if($scope.jobs.data[i]._id===job._id){$scope.jobs.data.splice(i,1)}}}).catch(function(e){console.error(e);throw e})};$scope.runJob=function(job,force){clusterpostService.submitJob(job._id,force).then(function(res){$scope.getDB()}).catch(function(e){console.error(e)})};$scope.getDB=function(){clusterpostService.getAllJobs().then(function(res){$scope.jobs.data=res.data;$scope.jobs.status=_.uniq(_.pluck(_.pluck(res.data,"jobstatus"),"status"));$scope.jobs.executables=_.uniq(_.pluck(res.data,"executable"))}).catch(function(e){console.error(e)})};$scope.showJobDetail=function(job){$scope.jobs.selectedJob.job=job;$scope.activeTab=1;clusterpostService.getAttachment(job._id,"stdout.out","text").then(function(res){$scope.jobs.selectedJob.stdout=res.data}).catch(console.error);clusterpostService.getAttachment(job._id,"stderr.err","text").then(function(res){$scope.jobs.selectedJob.stderr=res.data}).catch(console.error)};$scope.runAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,function(job){return clusterpostService.submitJob(job._id).then(function(res){console.log(res)}).catch(console.error)});Promise.all(prom).catch(console.error)}};$scope.updateAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,function(job){return clusterpostService.getJobStatus(job._id).then(function(res){job.jobstatus=res.data}).catch(console.error)});Promise.all(prom).catch(console.error)}};$scope.deleteAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,$scope.deleteJob);Promise.all(prom).catch(console.error)}};$scope.killAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,$scope.killJob);Promise.all(prom).catch(console.error)}};$scope.numJobsInPage=[{id:"0",value:"10"},{id:"1",value:"50"},{id:"2",value:"100"}];$scope.rowCollection=[];$scope.getDB();$scope.forceRunJob=false;$scope.activeTab=0}return{restrict:"E",link:link,templateUrl:"./src/clusterpost-list.directive.html"}}]);angular.module("clusterpost-list").directive("onFilter",function(){return{require:"^stTable",scope:{onFilter:"="},link:function(scope,element,attr,ctrl){scope.$watch(ctrl.getFilteredCollection,function(val){if(scope.onFilter){scope.onFilter(val)}})}}});angular.module("clusterpost-list").directive("clusterpostApp",["$routeParams","$location","clusterpostService","$filter","$q","clusterauth",function($routeParams,$location,clusterpostService,$filter,$q,clusterauth){function link($scope,$attrs){$scope.jobs={selectedJob:{}};$scope.jobs.onFilter=function(filtered){$scope.jobs.filteredJobs=filtered};$scope.updateStatus=function(job){clusterpostService.getJobStatus(job._id).then(function(res){job.jobstatus=res.data}).catch(function(e){console.error(e);throw e})};$scope.killJob=function(job){clusterpostService.killJob(job._id).then(function(res){job.jobstatus=res.data}).catch(function(e){console.error(e);throw e})};$scope.removeRow=function(job){var index=$scope.rowCollection.indexOf(job);if(index!==-1){$scope.rowCollection.splice(index,1)}};$scope.deleteJob=function(job){clusterpostService.deleteJob(job._id).then(function(res){for(var i=0;i<$scope.jobs.data.length;i++){if($scope.jobs.data[i]._id===job._id){$scope.jobs.data.splice(i,1)}}}).catch(function(e){console.error(e);throw e})};$scope.runJob=function(job,force){clusterpostService.submitJob(job._id,force).then(function(res){$scope.getDB()}).catch(function(e){console.error(e)})};$scope.getDB=function(){clusterpostService.getUserJobs({userEmail:$scope.appUser.selectedUser.email,executable:$scope.appName}).then(function(res){$scope.jobs.data=res.data;$scope.jobs.status=_.uniq(_.pluck(_.pluck(res.data,"jobstatus"),"status"));$scope.jobs.executables=_.uniq(_.pluck(res.data,"executable"))}).catch(function(e){console.error(e)})};$scope.showJobDetail=function(job){$scope.jobs.selectedJob.job=job;$scope.activeTab=1;clusterpostService.getAttachment(job._id,"stdout.out","text").then(function(res){$scope.jobs.selectedJob.stdout=res.data.replace(/\n/g,"<br>")}).catch(console.error);clusterpostService.getAttachment(job._id,"stderr.err","text").then(function(res){$scope.jobs.selectedJob.stderr=res.data.replace(/\n/g,"<br>")}).catch(console.error)};$scope.runAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,function(job){return clusterpostService.submitJob(job._id).then(function(res){console.log(res)}).catch(console.error)});Promise.all(prom).catch(console.error)}};$scope.updateAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,function(job){return clusterpostService.getJobStatus(job._id).then(function(res){job.jobstatus=res.data}).catch(console.error)});Promise.all(prom).catch(console.error)}};$scope.deleteAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,$scope.deleteJob);Promise.all(prom).catch(console.error)}};$scope.killAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,$scope.killJob);Promise.all(prom).catch(console.error)}};$scope.jobAppCallback=function(job){if($scope.jobCallback){$scope.jobCallback(job)}};$scope.numJobsInPage=[{id:"0",value:"10"},{id:"1",value:"50"},{id:"2",value:"100"}];$scope.rowCollection=[];$scope.forceRunJob=false;$scope.activeTab=0;$scope.appUser={};clusterauth.getUser().then(function(user){$scope.appUser.selectedUser=user;$scope.appUser.user=user;if($scope.appUser.user.scope.indexOf("admin")){return clusterauth.getUsers().then(function(users){$scope.appUser.allUsers=users.data;if($routeParams.adminCpUid){$scope.appUser.selectedUser=_.find($scope.appUser.allUsers,function(user){return user._id===$routeParams.adminCpUid})}return $scope.getDB()})}else{return $scope.getDB()}}).catch(console.error);$scope.appUser.userChange=function(){$scope.getDB();$location.search("adminCpUid",$scope.appUser.selectedUser._id)};$scope.getJobName=function(job){if(job.name){return job.name}else{return job._id}};$scope.downloadAllJobs=function(){if($scope.jobs.filteredJobs){var prom=_.map($scope.jobs.filteredJobs,$scope.downloadJob);Promise.all(prom).catch(console.error)}};$scope.downloadJob=function(job){if($scope.downloadCallback){return $scope.downloadCallback(job)}else{console.log("TODO")}}}return{restrict:"E",link:link,scope:{jobCallback:"=",appName:"=",downloadCallback:"="},templateUrl:"./src/clusterpost-app.directive.html"}}]);angular.module("clusterpost-list").directive("clusterpostEsAdmin",["$routeParams","$location","clusterpostService",function($routeParams,$location,clusterpostService){function link($scope,$attrs){clusterpostService.getExecutionServerTokens().then(function(res){$scope.tokens=res.data});$scope.downloadToken=function(token){var pom=document.createElement("a");var filename="token.json";var pom=document.createElement("a");var bb=new Blob([angular.toJson(token)],{type:"text/plain"});pom.setAttribute("href",window.URL.createObjectURL(bb));pom.setAttribute("download",filename);pom.dataset.downloadurl=["text/plain",pom.download,pom.href].join(":");pom.draggable=true;pom.classList.add("dragout");pom.click()}}return{restrict:"E",link:link,scope:{jobCallback:"=",appName:"=",downloadCallback:"="},templateUrl:"./src/clusterpost-es-admin.directive.html"}}]);angular.module("clusterpost-list").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("./src/clusterpost-app.directive.html",'<uib-tabset active="activeTab">\n'+'\t<uib-tab heading="List" index="0">\n'+'\t\t<div class="panel panel-default">\n'+'\t\t\t<div class="panel-body" style="overflow:scroll">\n'+"\n"+'\t\t\t\t<div class="input-group" ng-if="appUser.user.scope.indexOf(\'admin\') != -1">\n'+'\t\t\t\t\t<select class="form-control" ng-options="user.email for user in appUser.allUsers" ng-model="appUser.selectedUser" ng-change="appUser.userChange()"></select>\n'+"\t\t\t\t</div>\n"+"\t\t\t\t<br>\n"+'\t\t\t\t<table st-table="jobs.displayedJobs" st-safe-src="jobs.data" class="table table-striped" on-filter="jobs.onFilter">\n'+"\t\t\t\t\t\t<thead>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th colspan="6"><input st-search="" class="form-control" placeholder="Global search ..." type="text"/></th>\n'+'\t\t\t\t\t\t\t<th colspan="5">Number of jobs per page \n'+'\t\t\t\t\t\t\t\t<select class="form-control" ng-model="itemsByPage" ng-options="option.value for option in numJobsInPage track by option.id"></select>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th st-sort="name">Detail</th>\n'+'\t\t\t\t\t\t\t<th st-sort="name">Job name</th>\n'+'\t\t\t\t\t\t\t<th st-sort="userEmail">User email</th>\n'+'\t\t\t\t\t\t\t<th st-sort="timestamp">Timestamp</th>\n'+'\t\t\t\t\t\t\t<th st-sort="jobsstatus.status">Job status</th>\n'+'\t\t\t\t\t\t\t<th st-sort="row.executable"> Executable </th>\n'+'\t\t\t\t\t\t\t<th st-sort="jobstatus.jobid">Job Id</th>\n'+"\t\t\t\t\t\t\t<th>Download</th>\n"+"\t\t\t\t\t\t\t<th>Update</th>\n"+"\t\t\t\t\t\t\t<th>Run</th>\n"+"\t\t\t\t\t\t\t<th>Force run</th>\n"+"\t\t\t\t\t\t\t<th>Kill</th>\n"+"\t\t\t\t\t\t\t<th>Delete</th>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th colspan="2">\n'+'\t\t\t\t\t\t\t\t<input st-search="name" placeholder="search for name" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<input st-search="userEmail" placeholder="search for userEmail" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<input st-search="timestamp" placeholder="search for timestamp" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th> \n"+'\t\t\t\t\t\t\t\t<select class="form-control" st-search="jobstatus.status">\n'+'\t\t\t                    \t<option value="">All</option>\n'+'\t\t\t                    \t<option ng-repeat="st in jobs.status">{{st}}</option>\n'+"\t\t\t                \t</select>\n"+"\t\t\t\t\t\t\t</th>\n"+'\t\t\t\t\t\t\t<th colspan="2">\n'+'\t\t\t\t\t\t\t\t<select class="form-control" st-search="executable">\n'+'\t\t\t                    \t<option value="">All</option>\n'+'\t\t\t                    \t<option ng-repeat="ex in jobs.executables">{{ex}}</option>\n'+"\t\t\t                \t</select>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="downloadAllJobs()" class="btn btn-sm btn-success">\n'+'\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-download"></span>\n'+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="updateAllJobs()" class="btn btn-sm btn-info">\n'+'\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-refresh">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="runAllJobs()" class="btn btn-sm btn-success">\n'+'\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-play">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="killAllJobs()" class="btn btn-sm btn-warning">\n'+'\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-remove-circle">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="deleteAllJobs()" class="btn btn-sm btn-danger">\n'+'\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-trash">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t</thead>\n"+"\t\t\t\t\t\t<tbody>\n"+'\t\t\t\t\t\t<tr ng-repeat="row in jobs.displayedJobs">\n'+'\t\t\t\t\t\t\t<td><button class="btn btn-info" ng-click="showJobDetail(row)"><span class="glyphicon glyphicon-eye-open"></span></button></td>\n'+'\t\t\t\t\t\t\t<td><button class="btn btn-default" ng-click="jobAppCallback(row)">{{getJobName(row)}}</button></td>\n'+"\t\t\t\t\t\t\t<td>{{row.userEmail}}</td>\n"+"\t\t\t\t\t\t\t<td>{{row.timestamp}}</td>\n"+"\t\t\t\t\t\t\t<td>{{row.jobstatus.status}}</td>\n"+"\t\t\t\t\t\t\t<td>{{row.executable}}</td>\n"+"\t\t\t\t\t\t\t<td>{{row.jobstatus.jobid}}</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="downloadJob(row)" class="btn btn-sm btn-success">\n'+'\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-download"></span>\n'+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="updateStatus(row)" class="btn btn-sm btn-info">\n'+'\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-refresh">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="runJob(row,forceRunJob)" class="btn btn-sm btn-success">\n'+'\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-play">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<input type="checkbox" ng-model="forceRunJob"/>\n'+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="killJob(row)" class="btn btn-sm btn-warning">\n'+'\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-remove-circle">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="deleteJob(row)" class="btn btn-sm btn-danger">\n'+'\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-trash">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t</tbody>\n"+"\t\t\t\t\t\t<tfoot>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<td colspan="10" class="text-center">\n'+'\t\t\t\t\t\t\t\t<div st-pagination="" st-items-by-page="itemsByPage.value" st-displayed-pages="7"></div>\n'+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</tfoot>\n"+"\t\t\t\t</table>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+" \t</uib-tab>\n"+'\t<uib-tab heading="Job detail" index="1">\n'+'\t\t<div class="panel panel-default">\n'+'\t\t\t\x3c!-- <div class="panel-heading">\n'+'\t\t\t\t<h3 class="panel-title">Probabilistic tractography with FSL tools</h3>\n'+"\t\t\t</div> --\x3e\n"+'\t\t\t<div class="panel-body">\n'+'\t\t\t\t<div class="col-md-12">\n'+'\t\t\t\t\t<div class="col-md-6 alert alert-info" role="alert" ng-bind-html="jobs.selectedJob.stdout"></div>\n'+'\t\t\t\t\t<div class="col-md-6 alert alert-warning" role="alert" ng-bind-html="jobs.selectedJob.stderr"></div>\n'+"\t\t\t\t</div>\n"+'\t\t\t\t<div class="col-md-12">\n'+'\t\t  \t\t\t<json-formatter json="jobs.selectedJob.job" open="4"></json-formatter>\n'+"\t\t  \t\t</div>\n"+"\t\t  \t</div>\n"+"\t\t</div>\n"+"\t</uib-tab>\n"+"</uib-tabset>");$templateCache.put("./src/clusterpost-es-admin.directive.html",'<uib-tabset active="activeTab">\n'+'\t<uib-tab heading="Execution server tokens" index="0">\n'+'\t\t<div class="panel panel-default">\n'+'\t\t\t<div class="panel-body" style="overflow:scroll">\n'+'\t\t\t\t<table st-table="displayedTokens" st-safe-src="tokens" class="table table-striped">\n'+"\t\t\t\t\t<thead>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th colspan="2"><input st-search="name" class="form-control" placeholder="Global search ..." type="text"/></th>\t\t\t\t\t\t\t\n'+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th st-sort="name">Execution server name</th>\n'+"\t\t\t\t\t\t\t<th>Download</th>\t\t\t\t\t\t\t\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</thead>\n"+"\t\t\t\t\t<tbody>\n"+'\t\t\t\t\t\t<tr ng-repeat="row in displayedTokens">\n'+"\t\t\t\t\t\t\t<td>{{row.executionserver}}</td>\n"+'\t\t\t\t\t\t\t<td><button type="button" class="btn btn-info" ng-click="downloadToken(row)"><span class="glyphicon glyphicon-download" aria-hidden="true"></span></button></td>\n'+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</tbody>\n"+"\t\t\t\t\t<tfoot>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<td colspan="10" class="text-center">\n'+'\t\t\t\t\t\t\t\t<div st-pagination="" st-items-by-page="itemsByPage.value" st-displayed-pages="7"></div>\n'+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</tfoot>\n"+"\t\t\t\t</table>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+" \t</uib-tab>\n"+' \t<uib-tab heading="Users" index="1">\n'+' \t\t<div class="panel panel-default">\n'+'\t\t\t<div class="panel-body" style="overflow:scroll">\n'+" \t\t\t\t<users user-scopes=\"['admin', 'clusterpost', 'default']\"></users>\n"+" \t\t\t</div>\n"+" \t\t</div>\n"+" \t</uib-tab>\n"+"</uib-tabset>");$templateCache.put("./src/clusterpost-list.directive.html",'<uib-tabset active="activeTab">\n'+'\t<uib-tab heading="Jobs" index="0">\n'+'\t\t<div class="panel panel-default" style="overflow:scroll">\n'+'\t\t\t\x3c!-- <div class="panel-heading">\n'+'\t\t\t\t<h3 class="panel-title">Probabilistic tractography with FSL tools</h3>\n'+"\t\t\t</div> --\x3e\n"+'\t\t\t<div class="panel-body">\n'+'\t\t\t\t<table st-table="jobs.displayedJobs" st-safe-src="jobs.data" class="table table-striped" on-filter="jobs.onFilter">\n'+"\t\t\t\t\t\t<thead>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th colspan="6"><input st-search="" class="form-control" placeholder="Global search ..." type="text"/></th>\n'+'\t\t\t\t\t\t\t<th colspan="5">Number of jobs per page \n'+'\t\t\t\t\t\t\t\t<select class="form-control" ng-model="itemsByPage" ng-options="option.value for option in numJobsInPage track by option.id"></select>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<th st-sort="_id"> Id </th>\n'+'\t\t\t\t\t\t\t<th st-sort="userEmail">User email</th>\n'+'\t\t\t\t\t\t\t<th st-sort="timestamp">Timestamp</th>\n'+'\t\t\t\t\t\t\t<th st-sort="jobsstatus.status">Job status</th>\n'+'\t\t\t\t\t\t\t<th st-sort="row.executable"> Executable </th>\n'+'\t\t\t\t\t\t\t<th st-sort="jobstatus.jobid">Job Id</th>\n'+"\t\t\t\t\t\t\t<th>Update</th>\n"+"\t\t\t\t\t\t\t<th>Run</th>\n"+"\t\t\t\t\t\t\t<th>Force run</th>\n"+"\t\t\t\t\t\t\t<th>Kill</th>\n"+"\t\t\t\t\t\t\t<th>Delete</th>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t<tr>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<input st-search="_id" placeholder="search for id" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<input st-search="userEmail" placeholder="search for userEmail" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<input st-search="timestamp" placeholder="search for timestamp" class="input-sm form-control" type="search"/>\n'+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th> \n"+'\t\t\t\t\t\t\t\t<select class="form-control" st-search="jobstatus.status">\n'+'\t\t\t                    \t<option value="">All</option>\n'+'\t\t\t                    \t<option ng-repeat="st in jobs.status">{{st}}</option>\n'+"\t\t\t                \t</select>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<select class="form-control" st-search="executable">\n'+'\t\t\t                    \t<option value="">All</option>\n'+'\t\t\t                    \t<option ng-repeat="ex in jobs.executables">{{ex}}</option>\n'+"\t\t\t                \t</select>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="updateAllJobs()" class="btn btn-sm btn-info">\n'+'\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-refresh">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="runAllJobs()" class="btn btn-sm btn-success">\n'+'\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-play">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="killAllJobs()" class="btn btn-sm btn-warning">\n'+'\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-remove-circle">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\t\t\t\t\t\t\t<th>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="deleteAllJobs()" class="btn btn-sm btn-danger">\n'+'\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-trash">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</th>\n"+"\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t</thead>\n"+"\t\t\t\t\t\t<tbody>\n"+'\t\t\t\t\t\t<tr ng-repeat="row in jobs.displayedJobs">\n'+'\t\t\t\t\t\t\t<td><button class="btn btn-default" ng-click="showJobDetail(row)">{{row._id}}</button></td>\n'+"\t\t\t\t\t\t\t<td>{{row.userEmail}}</td>\n"+"\t\t\t\t\t\t\t<td>{{row.timestamp}}</td>\n"+"\t\t\t\t\t\t\t<td>{{row.jobstatus.status}}</td>\n"+"\t\t\t\t\t\t\t<td>{{row.executable}}</td>\n"+"\t\t\t\t\t\t\t<td>{{row.jobstatus.jobid}}</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="updateStatus(row)" class="btn btn-sm btn-info">\n'+'\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-refresh">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="runJob(row,forceRunJob)" class="btn btn-sm btn-success">\n'+'\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-play">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<input type="checkbox" ng-model="forceRunJob"/>\n'+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="killJob(row)" class="btn btn-sm btn-warning">\n'+'\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-remove-circle">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t\t<td>\n"+'\t\t\t\t\t\t\t\t<button type="button" ng-click="deleteJob(row)" class="btn btn-sm btn-danger">\n'+'\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-trash">\n'+"\t\t\t\t\t\t\t\t\t</i>\n"+"\t\t\t\t\t\t\t\t</button>\n"+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t\t</tbody>\n"+"\t\t\t\t\t\t<tfoot>\n"+"\t\t\t\t\t\t<tr>\n"+'\t\t\t\t\t\t\t<td colspan="10" class="text-center">\n'+'\t\t\t\t\t\t\t\t<div st-pagination="" st-items-by-page="itemsByPage.value" st-displayed-pages="7"></div>\n'+"\t\t\t\t\t\t\t</td>\n"+"\t\t\t\t\t\t</tr>\n"+"\t\t\t\t\t</tfoot>\n"+"\t\t\t\t</table>\n"+"\t\t\t</div>\n"+"\t\t</div>\n"+"\t</uib-tab>\n"+'\t<uib-tab heading="Job detail" index="1">\n'+'\t\t<div class="panel panel-default">\n'+'\t\t\t\x3c!-- <div class="panel-heading">\n'+'\t\t\t\t<h3 class="panel-title">Probabilistic tractography with FSL tools</h3>\n'+"\t\t\t</div> --\x3e\n"+'\t\t\t<div class="panel-body">\n'+'\t\t\t\t<div class="col-md-12">\n'+'\t\t\t\t\t<div class="col-md-6 alert alert-info" role="alert">\n'+"\t\t\t\t\t\t{{jobs.selectedJob.stdout}}\n"+"\t\t\t\t\t</div>\n"+'\t\t\t\t\t<div class="col-md-6 alert alert-warning" role="alert">\n'+"\t\t\t\t\t  \t{{jobs.selectedJob.stderr}}\n"+"\t\t\t\t\t</div>\n"+"\t\t\t\t</div>\n"+'\t\t\t\t<div class="col-md-12">\n'+'\t\t  \t\t\t<json-formatter json="jobs.selectedJob.job" open="4"></json-formatter>\n'+"\t\t  \t\t</div>\n"+"\t\t  \t</div>\n"+"\t\t</div>\n"+"\t</uib-tab>\n"+"</uib-tabset>\n"+" ")}]);
//# sourceMappingURL=clusterpost-list.min.js.map